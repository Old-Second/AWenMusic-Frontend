{"version":3,"sources":["utils/format.ts","network/login/index.tsx","network/song/index.ts","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/streamsaver/StreamSaver.js","network/comment/index.ts","assets/img/holder/user-placehoder.png","components/common/reply/style.tsx","components/common/reply/index.tsx","components/common/comment/style.tsx","components/common/comment/index.tsx","network/thumbs/index.ts","assets/img/singlecover.png","components/content/playPage/style.tsx","components/content/playPage/index.tsx","network/request.tsx","views/Login/store/actionCreators.tsx","network/user/index.ts"],"names":["formatTime","dateS","fmt","date","Date","test","replace","RegExp","$1","getFullYear","substr","length","o","getMonth","getDate","getHours","getMinutes","getSeconds","k","str","padLeftZero","console","log","login","userName","password","request","url","method","data","register","getRecSong","offset","limit","params","getSongURL","id","getSongDetail","getLyric","addSongPlayCount","downloadSong","name","fetch","HOST_NAME","headers","authorization","store","getState","getIn","token","body","JSON","stringify","then","res","fileStream","streamSaver","createWriteStream","size","get","readableStream","window","WritableStream","pipeTo","writer","getWriter","reader","getReader","pump","read","done","close","write","value","_defineProperty","obj","key","Object","defineProperty","enumerable","configurable","writable","module","exports","global","HTMLElement","warn","mitmTransporter","supportsTransferable","fn","e","ponyfill","WebStreamsPolyfill","isSecureContext","useBlobFallback","safari","WebKitPoint","downloadStrategy","document","documentElement","style","supported","version","full","major","minor","dot","mitm","makeIframe","src","Error","iframe","createElement","hidden","loaded","isIframe","postMessage","contentWindow","addEventListener","once","appendChild","makePopup","options","delegate","createDocumentFragment","popup","frame","open","isPopup","remove","dispatchEvent","removeEventListener","onReady","evt","source","Event","Response","ReadableStream","navigator","err","loadTransporter","filename","opts","pathname","writableStrategy","undefined","readableStrategy","bytesWritten","downloadUrl","channel","ts","Number","isFinite","highWaterMark","MessageChannel","encodeURIComponent","escape","response","transferringReadable","Math","random","toString","slice","args","port2","transformer","transform","chunk","controller","Uint8Array","TypeError","enqueue","location","href","flush","TransformStream","readable","port1","onmessage","download","chunks","push","blob","Blob","type","link","URL","createObjectURL","click","abort","mc","definition","publishComment","content","replyComment","getAllComment","deleteComment","ReplyWrapper","styled","div","Reply","props","onClick","thumbClick","isShowBtn","isShowPublish","showCommentClick","userId","delComment","cancelThumb","useState","setContent","isShow","setIsShow","userDetail","useSelector","state","publish","isThumb","momentFlag","commentFlag","thumb","moment","findIndex","item","index","comment","className","cols","rows","onInput","currentTarget","changeContent","memo","CommentWrapper","Comment","comments","total","pageClick","dispatch","useDispatch","reply","trim","changeUserDetailAction","cancelThumbs","deleteCom","changeMsgAction","userRouter","history","map","user","avatarUrl","alt","placeholder","createTime","defaultCurrent","pageSize","onChange","pageChange","withRouter","PlayPageWrapper","singlecover","CenterContent","PlayPage","setComment","setTotal","songDetail","lyric","currentLyricIndex","playType","useEffect","count","isLove","love","songId","album","coverUrl","cancelFavorite","setUserFavorite","color","artist","Array","isArray","duration","isPage","config","instance","axios","create","baseURL","timeout","interceptors","use","status","message","logoutAction","changeUserMsg","updateTime","manage","auth","createBrowserHistory","userMsg","changeLoginType","loginType","getUserDetail","follow","localStorage","setItem","loginAction","a","warning","fontSize","marginTop","clear","subscriber","getUserFavorite","getUserSub","uploadAvatar","formData"],"mappings":"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","file":"static/js/21.fead68b1.chunk.js","sourcesContent":["/*格式化时间*/\r\nexport function formatTime(dateS: number | string, fmt: string) {\r\n  let date: Date = new Date(dateS);\r\n  if (/(y+)/.test(fmt)) {\r\n    fmt = fmt.replace(RegExp.$1, (date.getFullYear() + '').substr(4 - RegExp.$1.length));\r\n  }\r\n  let o = {\r\n    'M+': date.getMonth() + 1,\r\n    'd+': date.getDate(),\r\n    'h+': date.getHours(),\r\n    'm+': date.getMinutes(),\r\n    's+': date.getSeconds()\r\n  };\r\n  for (let k in o) {\r\n    if (new RegExp(`(${k})`).test(fmt)) {\r\n      // @ts-ignore\r\n      let str = o[k] + '';\r\n      fmt = fmt.replace(RegExp.$1, RegExp.$1.length === 1 ? str : padLeftZero(str));\r\n    }\r\n  }\r\n  return fmt || '';\r\n}\r\n\r\nfunction padLeftZero(str: string) {\r\n  return ('00' + str).substr(str.length);\r\n}\r\nconsole.log(formatTime(251179,\"mm:ss\"))","import request from '../request';\r\n//登录\r\nexport function login(userName: string, password: string) {\r\n  return request({\r\n    url: '/login',\r\n    method: 'post',\r\n    data: {\r\n      userName,\r\n      password\r\n    }\r\n  });\r\n}\r\n//注册\r\nexport function register(userName: string, password: string) {\r\n  return request({\r\n    url: '/register',\r\n    method: 'post',\r\n    data: {\r\n      userName,\r\n      password\r\n    }\r\n  });\r\n}\r\n","import request from '../request';\nimport store from '../../store';\n// @ts-ignore\nimport streamSaver from 'streamsaver';\nimport { HOST_NAME } from '../../config';\n\n//获取推荐歌曲\nexport function getRecSong<T>(offset: number = 0, limit: number = 30) {\n  return request<T>({\n    url: '/song/recommend',\n    params: {\n      offset,\n      limit\n    }\n  });\n}\n\n//获取歌曲播放地址\nexport function getSongURL(id: string) {\n  return request({\n    url: '/song/url',\n    params: {\n      id\n    }\n  });\n}\n\n//获取歌曲详情\nexport function getSongDetail(id: String) {\n  return request({\n    url: '/song/detail',\n    params: {\n      id\n    }\n  });\n}\n\n//获取歌词\nexport function getLyric(id: string) {\n  return request({\n    url: '/song/lyric',\n    params: {\n      id\n    }\n  });\n}\n\n//为歌曲添加播放量\nexport function addSongPlayCount(id: string) {\n  return request({\n    url: '/song/playCount',\n    method: 'post',\n    data: {\n      id\n    }\n  });\n}\n\n//下载歌曲\nexport function downloadSong(id: string, name: string) {\n  fetch(`${HOST_NAME}/song/download`, {\n    method: 'post',\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ id })\n  }).then((res) => {\n    const fileStream = streamSaver.createWriteStream(name + '.mp3', {\n      size: res.headers.get('content-length')\n    });\n    const readableStream = res.body;\n    // @ts-ignore\n    if (window.WritableStream && readableStream.pipeTo) {\n      // @ts-ignore\n      return readableStream.pipeTo(fileStream).then(() => {});\n    }\n    // @ts-ignore\n    window.writer = fileStream.getWriter();\n    // @ts-ignore\n    const reader = res.body.getReader();\n    // @ts-ignore\n    const pump = () =>\n      reader.read().then((res) =>\n        // @ts-ignore\n        res.done ? window.writer.close() : window.writer.write(res.value).then(pump)\n      );\n    pump();\n  });\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","/* global chrome location ReadableStream define MessageChannel TransformStream */\n\n;((name, definition) => {\n  typeof module !== 'undefined'\n    ? module.exports = definition()\n    : typeof define === 'function' && typeof define.amd === 'object'\n      ? define(definition)\n      : this[name] = definition()\n})('streamSaver', () => {\n  'use strict'\n\n  const global = typeof window === 'object' ? window : this\n  if (!global.HTMLElement) console.warn('streamsaver is meant to run on browsers main thread')\n\n  let mitmTransporter = null\n  let supportsTransferable = false\n  const test = fn => { try { fn() } catch (e) {} }\n  const ponyfill = global.WebStreamsPolyfill || {}\n  const isSecureContext = global.isSecureContext\n  // TODO: Must come up with a real detection test (#69)\n  let useBlobFallback = /constructor/i.test(global.HTMLElement) || !!global.safari || !!global.WebKitPoint\n  const downloadStrategy = isSecureContext || 'MozAppearance' in document.documentElement.style\n    ? 'iframe'\n    : 'navigate'\n\n  const streamSaver = {\n    createWriteStream,\n    WritableStream: global.WritableStream || ponyfill.WritableStream,\n    supported: true,\n    version: { full: '2.0.5', major: 2, minor: 0, dot: 5 },\n    mitm: 'https://jimmywarting.github.io/StreamSaver.js/mitm.html?version=2.0.0'\n  }\n\n  /**\n   * create a hidden iframe and append it to the DOM (body)\n   *\n   * @param  {string} src page to load\n   * @return {HTMLIFrameElement} page to load\n   */\n  function makeIframe (src) {\n    if (!src) throw new Error('meh')\n    const iframe = document.createElement('iframe')\n    iframe.hidden = true\n    iframe.src = src\n    iframe.loaded = false\n    iframe.name = 'iframe'\n    iframe.isIframe = true\n    iframe.postMessage = (...args) => iframe.contentWindow.postMessage(...args)\n    iframe.addEventListener('load', () => {\n      iframe.loaded = true\n    }, { once: true })\n    document.body.appendChild(iframe)\n    return iframe\n  }\n\n  /**\n   * create a popup that simulates the basic things\n   * of what a iframe can do\n   *\n   * @param  {string} src page to load\n   * @return {object}     iframe like object\n   */\n  function makePopup (src) {\n    const options = 'width=200,height=100'\n    const delegate = document.createDocumentFragment()\n    const popup = {\n      frame: global.open(src, 'popup', options),\n      loaded: false,\n      isIframe: false,\n      isPopup: true,\n      remove () { popup.frame.close() },\n      addEventListener (...args) { delegate.addEventListener(...args) },\n      dispatchEvent (...args) { delegate.dispatchEvent(...args) },\n      removeEventListener (...args) { delegate.removeEventListener(...args) },\n      postMessage (...args) { popup.frame.postMessage(...args) }\n    }\n\n    const onReady = evt => {\n      if (evt.source === popup.frame) {\n        popup.loaded = true\n        global.removeEventListener('message', onReady)\n        popup.dispatchEvent(new Event('load'))\n      }\n    }\n\n    global.addEventListener('message', onReady)\n\n    return popup\n  }\n\n  try {\n    // We can't look for service worker since it may still work on http\n    new Response(new ReadableStream())\n    if (isSecureContext && !('serviceWorker' in navigator)) {\n      useBlobFallback = true\n    }\n  } catch (err) {\n    useBlobFallback = true\n  }\n\n  test(() => {\n    // Transfariable stream was first enabled in chrome v73 behind a flag\n    const { readable } = new TransformStream()\n    const mc = new MessageChannel()\n    mc.port1.postMessage(readable, [readable])\n    mc.port1.close()\n    mc.port2.close()\n    supportsTransferable = true\n    // Freeze TransformStream object (can only work with native)\n    Object.defineProperty(streamSaver, 'TransformStream', {\n      configurable: false,\n      writable: false,\n      value: TransformStream\n    })\n  })\n\n  function loadTransporter () {\n    if (!mitmTransporter) {\n      mitmTransporter = isSecureContext\n        ? makeIframe(streamSaver.mitm)\n        : makePopup(streamSaver.mitm)\n    }\n  }\n\n  /**\n   * @param  {string} filename filename that should be used\n   * @param  {object} options  [description]\n   * @param  {number} size     depricated\n   * @return {WritableStream<Uint8Array>}\n   */\n  function createWriteStream (filename, options, size) {\n    let opts = {\n      size: null,\n      pathname: null,\n      writableStrategy: undefined,\n      readableStrategy: undefined\n    }\n\n    let bytesWritten = 0 // by StreamSaver.js (not the service worker)\n    let downloadUrl = null\n    let channel = null\n    let ts = null\n\n    // normalize arguments\n    if (Number.isFinite(options)) {\n      [ size, options ] = [ options, size ]\n      console.warn('[StreamSaver] Depricated pass an object as 2nd argument when creating a write stream')\n      opts.size = size\n      opts.writableStrategy = options\n    } else if (options && options.highWaterMark) {\n      console.warn('[StreamSaver] Depricated pass an object as 2nd argument when creating a write stream')\n      opts.size = size\n      opts.writableStrategy = options\n    } else {\n      opts = options || {}\n    }\n    if (!useBlobFallback) {\n      loadTransporter()\n\n      channel = new MessageChannel()\n\n      // Make filename RFC5987 compatible\n      filename = encodeURIComponent(filename.replace(/\\//g, ':'))\n        .replace(/['()]/g, escape)\n        .replace(/\\*/g, '%2A')\n\n      const response = {\n        transferringReadable: supportsTransferable,\n        pathname: opts.pathname || Math.random().toString().slice(-6) + '/' + filename,\n        headers: {\n          'Content-Type': 'application/octet-stream; charset=utf-8',\n          'Content-Disposition': \"attachment; filename*=UTF-8''\" + filename\n        }\n      }\n\n      if (opts.size) {\n        response.headers['Content-Length'] = opts.size\n      }\n\n      const args = [ response, '*', [ channel.port2 ] ]\n\n      if (supportsTransferable) {\n        const transformer = downloadStrategy === 'iframe' ? undefined : {\n          // This transformer & flush method is only used by insecure context.\n          transform (chunk, controller) {\n            if (!(chunk instanceof Uint8Array)) {\n              throw new TypeError('Can only wirte Uint8Arrays')\n            }\n            bytesWritten += chunk.length\n            controller.enqueue(chunk)\n\n            if (downloadUrl) {\n              location.href = downloadUrl\n              downloadUrl = null\n            }\n          },\n          flush () {\n            if (downloadUrl) {\n              location.href = downloadUrl\n            }\n          }\n        }\n        ts = new streamSaver.TransformStream(\n          transformer,\n          opts.writableStrategy,\n          opts.readableStrategy\n        )\n        const readableStream = ts.readable\n\n        channel.port1.postMessage({ readableStream }, [ readableStream ])\n      }\n\n      channel.port1.onmessage = evt => {\n        // Service worker sent us a link that we should open.\n        if (evt.data.download) {\n          // Special treatment for popup...\n          if (downloadStrategy === 'navigate') {\n            mitmTransporter.remove()\n            mitmTransporter = null\n            if (bytesWritten) {\n              location.href = evt.data.download\n            } else {\n              downloadUrl = evt.data.download\n            }\n          } else {\n            if (mitmTransporter.isPopup) {\n              mitmTransporter.remove()\n              mitmTransporter = null\n              // Special case for firefox, they can keep sw alive with fetch\n              if (downloadStrategy === 'iframe') {\n                makeIframe(streamSaver.mitm)\n              }\n            }\n\n            // We never remove this iframes b/c it can interrupt saving\n            makeIframe(evt.data.download)\n          }\n        }\n      }\n\n      if (mitmTransporter.loaded) {\n        mitmTransporter.postMessage(...args)\n      } else {\n        mitmTransporter.addEventListener('load', () => {\n          mitmTransporter.postMessage(...args)\n        }, { once: true })\n      }\n    }\n\n    let chunks = []\n\n    return (!useBlobFallback && ts && ts.writable) || new streamSaver.WritableStream({\n      write (chunk) {\n        if (!(chunk instanceof Uint8Array)) {\n          throw new TypeError('Can only wirte Uint8Arrays')\n        }\n        if (useBlobFallback) {\n          // Safari... The new IE6\n          // https://github.com/jimmywarting/StreamSaver.js/issues/69\n          //\n          // even doe it has everything it fails to download anything\n          // that comes from the service worker..!\n          chunks.push(chunk)\n          return\n        }\n\n        // is called when a new chunk of data is ready to be written\n        // to the underlying sink. It can return a promise to signal\n        // success or failure of the write operation. The stream\n        // implementation guarantees that this method will be called\n        // only after previous writes have succeeded, and never after\n        // close or abort is called.\n\n        // TODO: Kind of important that service worker respond back when\n        // it has been written. Otherwise we can't handle backpressure\n        // EDIT: Transfarable streams solvs this...\n        channel.port1.postMessage(chunk)\n        bytesWritten += chunk.length\n\n        if (downloadUrl) {\n          location.href = downloadUrl\n          downloadUrl = null\n        }\n      },\n      close () {\n        if (useBlobFallback) {\n          const blob = new Blob(chunks, { type: 'application/octet-stream; charset=utf-8' })\n          const link = document.createElement('a')\n          link.href = URL.createObjectURL(blob)\n          link.download = filename\n          link.click()\n        } else {\n          channel.port1.postMessage('end')\n        }\n      },\n      abort () {\n        chunks = []\n        channel.port1.postMessage('abort')\n        channel.port1.onmessage = null\n        channel.port1.close()\n        channel.port2.close()\n        channel = null\n      }\n    }, opts.writableStrategy)\n  }\n\n  return streamSaver\n})\n","import request from '../request';\r\nimport store from '../../store';\r\n\r\n//发表评论\r\nexport function publishComment(content: string, key: string, id: string) {\r\n  return request({\r\n    url: '/comment',\r\n    method: 'post',\r\n    headers: {\r\n      // @ts-ignore\r\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\r\n    },\r\n    data: {\r\n      content,\r\n      [key]: id\r\n    }\r\n  });\r\n}\r\n//回复评论\r\nexport function replyComment(id: string, content: string) {\r\n  return request({\r\n    url: '/comment/reply',\r\n    headers: {\r\n      // @ts-ignore\r\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\r\n    },\r\n    method: 'post',\r\n    data: {\r\n      content,\r\n      id\r\n    }\r\n  });\r\n}\r\n//获取歌单评论\r\nexport function getAllComment<T>(id: string, key: string, offset: number, limit: number) {\r\n  return request<T>({\r\n    url: '/comment/all',\r\n    params: {\r\n      [key]: id,\r\n      offset,\r\n      limit\r\n    }\r\n  });\r\n}\r\n//删除评论\r\nexport function deleteComment(id: string) {\r\n  return request({\r\n    url: '/comment/delete',\r\n    method: 'post',\r\n    data: {\r\n      id\r\n    },\r\n    headers: {\r\n      // @ts-ignore\r\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\r\n    }\r\n  });\r\n}\r\n","export default \"data:image/png;base64,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\"","import styled from 'styled-components';\n\nexport const ReplyWrapper = styled.div`\n  .control-btn {\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    margin: 0 0 10px 0;\n\n    & > li {\n      margin: 0 15px 0 0;\n      cursor: pointer;\n\n      &.active {\n        i {\n          color: #ec4141;\n        }\n      }\n\n      i {\n        color: #656564;\n      }\n\n      &:nth-child(2) {\n        i {\n          font-size: 14px;\n        }\n      }\n    }\n  }\n\n  .publish {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  textarea {\n    border: 1px solid #e5e5e5;\n    resize: none;\n    height: 55px;\n    padding: 5px;\n  }\n\n  .reply-btn {\n    font-size: 13px;\n    width: 50px;\n    background-color: #f27a7a;\n    color: #fff;\n    padding: 5px 12px;\n    border-radius: 3px;\n    margin: 0 0 0 20px;\n    cursor: pointer;\n  }\n`;\n","import React, { memo, FC, ReactElement, useState, FormEvent } from 'react';\nimport { Map } from 'immutable';\nimport { ReplyWrapper } from './style';\nimport { useSelector } from 'react-redux';\nimport { ILogin, IUserDetail } from '../../../constant/store/login';\n\ninterface IProps {\n  id?: string;\n  userId?: string;\n  onClick: (content: string) => void;\n  thumbClick?: () => void;\n  cancelThumb?: () => void;\n  delComment?: () => void;\n  showCommentClick?: () => void;\n  isShowBtn: boolean;\n  isShowPublish: boolean;\n}\n\nconst Reply: FC<IProps> = (props): ReactElement => {\n  const { onClick, thumbClick, isShowBtn, isShowPublish, showCommentClick, id, userId, delComment, cancelThumb } =\n    props;\n  const [content, setContent] = useState<string>('');\n  const [isShow, setIsShow] = useState<boolean>(false);\n  const { userDetail } = useSelector<Map<string, ILogin>, { userDetail: IUserDetail }>((state) => ({\n    userDetail: state.getIn(['loginReducer', 'login', 'userDetail'])\n  }));\n  const publish = () => {\n    onClick(content);\n    setContent('');\n    setIsShow(false);\n  };\n  const thumb = () => {\n    if (thumbClick && cancelThumb) {\n      if (!isThumb()) {\n        thumbClick();\n      } else {\n        cancelThumb();\n      }\n    }\n  };\n  const changeContent = (e: FormEvent<HTMLTextAreaElement>) => {\n    setContent(e.currentTarget.value);\n  };\n  const liClick = () => {\n    setIsShow(!isShow);\n    if (showCommentClick) {\n      showCommentClick();\n    }\n  };\n  const isThumb = (): boolean => {\n    let momentFlag = -1;\n    let commentFlag = -1;\n    if (userDetail.thumb && userDetail.thumb.moment) {\n      momentFlag = userDetail.thumb.moment.findIndex((item: string, index: number) => {\n        return id === item;\n      });\n    }\n    if (userDetail.thumb && userDetail.thumb.comment) {\n      commentFlag = userDetail.thumb.comment.findIndex((item: string, index: number) => {\n        return id === item;\n      });\n    }\n    return momentFlag !== -1 || commentFlag !== -1;\n  };\n  const deleteCom = () => {\n    if (delComment) {\n      delComment();\n    }\n  };\n  return (\n    <ReplyWrapper>\n      {isShowBtn && (\n        <ul className=\"control-btn\">\n          <li onClick={(e) => thumb()} className={isThumb() ? 'active' : ''}>\n            <i className=\"iconfont icon-dianzan\"> </i>\n          </li>\n          <li onClick={(e) => liClick()}>\n            <i className=\"iconfont icon-pinglun1\"> </i>\n          </li>\n          {userDetail.userId === userId && (\n            <li onClick={(e) => deleteCom()}>\n              <i className=\"iconfont icon-huishouzhan\"> </i>\n            </li>\n          )}\n        </ul>\n      )}\n      {(isShow || isShowPublish) && (\n        <div className=\"publish\">\n          <textarea cols={80} rows={3} onInput={(e) => changeContent(e)} value={content} />\n          <div className=\"reply-btn\" onClick={(e) => publish()}>\n            发表评论\n          </div>\n        </div>\n      )}\n    </ReplyWrapper>\n  );\n};\nexport default memo(Reply);\n","import styled from 'styled-components';\r\nexport const CommentWrapper = styled.div`\r\n  padding: 0 0 15px 0;\r\n  .title {\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    margin: 15px 0;\r\n  }\r\n  .comment-list {\r\n    & > li {\r\n      display: flex;\r\n      align-items: flex-start;\r\n      border-bottom: 1px solid #e8e8e9;\r\n      padding: 10px;\r\n      background-color: #f8f8f8;\r\n      .img-container,\r\n      .avatar {\r\n        width: 35px;\r\n        height: 35px;\r\n        overflow: hidden;\r\n        border-radius: 50%;\r\n        margin: 0 20px 0 0;\r\n        img {\r\n          height: 100%;\r\n        }\r\n      }\r\n      .msg {\r\n        width: 90%;\r\n      }\r\n      .user-name,\r\n      .reply-user-name {\r\n        color: #507daf;\r\n        font-size: 13px;\r\n        white-space: nowrap;\r\n      }\r\n      .content,\r\n      .reply-content {\r\n        font-size: 13px;\r\n        color: #333;\r\n      }\r\n      .create-time,\r\n      .reply-time {\r\n        color: #656565;\r\n        font-size: 12px;\r\n      }\r\n      .reply-comment-btn {\r\n        width: 100%;\r\n        display: flex;\r\n        justify-content: flex-end;\r\n      }\r\n      .reply {\r\n        & > li {\r\n          padding: 10px 0;\r\n          display: flex;\r\n          border-bottom: 1px solid #e8e8e9;\r\n          .reply-msg {\r\n            margin: 0 20px 0 0;\r\n            .re-avatar {\r\n              width: 30px !important;\r\n              height: 30px;\r\n              border-radius: 50%;\r\n              overflow: hidden;\r\n              img {\r\n                height: 30px;\r\n              }\r\n            }\r\n          }\r\n          .reply-user-name {\r\n            margin: 0 5px 0 0;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .page {\r\n    margin: 15px 0 0 0;\r\n    display: flex;\r\n    justify-content: center;\r\n  }\r\n`;\r\n","import React, { memo, FC, ReactElement } from 'react';\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\n\nimport { Pagination } from 'antd';\n\nimport { CommentWrapper } from './style';\nimport { IComment } from '../../../constant/comment';\nimport { formatTime } from '../../../utils/format';\nimport Reply from '../reply';\nimport { deleteComment, replyComment } from '../../../network/comment';\nimport { cancelThumb, thumb as thumbComment } from '../../../network/thumbs';\nimport { changeUserDetailAction } from '../../../views/Login/store/actionCreators';\nimport placeholder from '../../../assets/img/holder/user-placehoder.png';\nimport { IUser } from '../../../constant/user';\n\ninterface IProps extends RouteComponentProps {\n  isPage: boolean;\n  total: number;\n  comments: IComment[];\n  onClick: () => void;\n  pageClick?: (count: number) => void;\n}\n\nconst Comment: FC<IProps> = memo((props): ReactElement => {\n  const { comments, onClick, total, pageClick } = props;\n  const dispatch = useDispatch();\n  const reply = (content: string, item: IComment): void => {\n    if (content.trim().length !== 0) {\n      replyComment(item.id, content).then((data) => {\n        onClick();\n      });\n    }\n  };\n  const thumb = (item: IComment): void => {\n    thumbComment('commentId', item.id).then((data) => {\n      dispatch(changeUserDetailAction());\n    });\n  };\n  const cancelThumbs = (item: IComment) => {\n    cancelThumb('commentId', item.id).then((data) => {\n      dispatch(changeUserDetailAction());\n    });\n  };\n  const pageChange = (e: number) => {\n    if (pageClick) {\n      pageClick(e);\n    }\n  };\n  const deleteCom = (item: IComment) => {\n    // @ts-ignore\n    dispatch(changeMsgAction(true)).then((data) => {\n      if (data) {\n        deleteComment(item.id).then((data: any) => {\n          onClick();\n        });\n      }\n    });\n  };\n  const userRouter = (item: IUser) => {\n    props.history.push({\n      pathname: '/Home/userDetail',\n      state: {\n        userId: item.userId\n      }\n    });\n  };\n  return (\n    <CommentWrapper>\n      {comments && comments.length !== 0 && <h3 className=\"title\">精彩评论（{total}）</h3>}\n      <ul className=\"comment-list\">\n        {comments &&\n          comments.length !== 0 &&\n          comments.map((item, index) => {\n            return (\n              <li key={item.id}>\n                <div className=\"img-container\" onClick={(e) => userRouter(item.user)}>\n                  {item.user.avatarUrl && <img src={item.user.avatarUrl} alt=\"\" />}\n                  {!item.user.avatarUrl && <img src={placeholder} alt=\"\" />}\n                </div>\n                <div className=\"msg\">\n                  <div className=\"user-name\">{item.user.userName}:</div>\n                  <div className=\"content\">{item.content}</div>\n                  <div className=\"create-time\">{formatTime(item.createTime, 'yyyy-MM-dd hh:mm:ss')}</div>\n                  <div className=\"reply-comment-btn\">\n                    <Reply\n                      onClick={(content: string) => reply(content, item)}\n                      isShowBtn={true}\n                      isShowPublish={false}\n                      thumbClick={() => thumb(item)}\n                      cancelThumb={() => cancelThumbs(item)}\n                      delComment={() => deleteCom(item)}\n                      id={item.id}\n                      userId={item.user.userId}\n                    />\n                  </div>\n                  <ul className=\"reply\">\n                    {item.reply &&\n                      item.reply.map((item, index) => {\n                        return (\n                          <li key={item.id}>\n                            <div className=\"reply-msg\">\n                              <div className=\"re-avatar\" onClick={(e) => userRouter(item.user)}>\n                                {item.user.avatarUrl && <img src={item.user.avatarUrl} alt=\"\" />}\n                                {!item.user.avatarUrl && <img src={placeholder} alt=\"\" />}\n                              </div>\n                            </div>\n                            <div>\n                              <div className=\"reply-user-name\">{item.user.userName}</div>\n                              <div className=\"reply-content\">{item.content}</div>\n                              <div className=\"reply-time\">{formatTime(item.createTime, 'yyyy-MM-dd hh:mm:ss')}</div>\n                              <div className=\"reply-reply-comment-btn\">\n                                <Reply\n                                  onClick={(content: string) => reply(content, item)}\n                                  isShowBtn={true}\n                                  isShowPublish={false}\n                                  thumbClick={() => thumb(item)}\n                                  cancelThumb={() => cancelThumbs(item)}\n                                  delComment={() => deleteCom(item)}\n                                  id={item.id}\n                                  userId={item.user.userId}\n                                />\n                              </div>\n                            </div>\n                          </li>\n                        );\n                      })}\n                  </ul>\n                </div>\n              </li>\n            );\n          })}\n      </ul>\n      {comments && comments.length !== 0 && total > 10 && (\n        <div className=\"page\">\n          <Pagination defaultCurrent={1} total={total} pageSize={10} onChange={(e) => pageChange(e)} />\n        </div>\n      )}\n    </CommentWrapper>\n  );\n});\nexport default withRouter(Comment);\n","import request from '../request';\r\nimport store from '../../store';\r\n//点赞\r\nexport function thumb(key: string, id: string) {\r\n  return request({\r\n    url: '/thumb',\r\n    method: 'post',\r\n    headers: {\r\n      // @ts-ignore\r\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\r\n    },\r\n    data: {\r\n      [key]: id\r\n    }\r\n  });\r\n}\r\n//取消点赞\r\nexport function cancelThumb(key: string, id: string) {\r\n  return request({\r\n    url: '/thumb/cancel',\r\n    method: 'post',\r\n    headers: {\r\n      // @ts-ignore\r\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\r\n    },\r\n    data: {\r\n      [key]: id\r\n    }\r\n  });\r\n}\r\n","export default __webpack_public_path__ + \"static/media/singlecover.d6695d9f.png\";","import styled from 'styled-components';\nimport singlecover from '../../../assets/img/singlecover.png';\n\nexport const PlayPageWrapper = styled.div`\n  background-color: #fff;\n  .play {\n    padding: 50px 0 0 0;\n    display: flex;\n    justify-content: space-around;\n    position: relative;\n    .play-album {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      @keyframes test {\n        from {\n          transform: rotateZ(0deg);\n        }\n        to {\n          transform: rotateZ(1turn);\n        }\n      }\n      .rotate-album {\n        width: 280px;\n        height: 280px;\n        border-radius: 50%;\n        text-align: center;\n        overflow: hidden;\n        animation: test infinite linear 13s;\n        background-color: #060606;\n        background-image: url(${singlecover});\n        background-repeat: no-repeat;\n        background-position: center;\n        background-size: 290px;\n        line-height: 280px;\n        img {\n          width: 68%;\n          vertical-align: middle;\n          border-radius: 50%;\n        }\n      }\n      .control-btn {\n        margin: 50px 0 0 0;\n        ul {\n          display: flex;\n          li {\n            margin: 0 20px;\n            height: 45px;\n            width: 45px;\n            border-radius: 50%;\n            background-color: #f5f5f5;\n            text-align: center;\n            line-height: 48px;\n            i {\n              font-size: 24px;\n            }\n            &:hover {\n              background-color: #ebebeb;\n              cursor: pointer;\n            }\n          }\n        }\n      }\n    }\n    /*收藏到歌单*/\n    .user-album {\n      padding: 30px 20px;\n      width: 500px;\n      height: 400px;\n      box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);\n      position: absolute;\n      left: 50%;\n      top: 50%;\n      transform: translate(-50%, -50%);\n      background-color: #fff;\n      z-index: 999;\n      .exit {\n        cursor: pointer;\n        position: absolute;\n        left: 100%;\n        top: 0;\n        transform: translate(-120%, 0) rotateZ(45deg);\n        i {\n          font-size: 24px;\n          color: #d3d3d3;\n        }\n      }\n      p {\n        font-size: 16px;\n        font-weight: bold;\n        text-align: center;\n      }\n      .create-play-list {\n        display: flex;\n        align-items: center;\n        i {\n          font-size: 20px;\n          margin: 0 10px 0 0;\n        }\n      }\n      ul {\n        background-color: #fff;\n        overflow-y: scroll;\n        height: 280px;\n        li:hover {\n          background-color: #eeeff0;\n        }\n      }\n    }\n    .song-msg {\n      width: 34%;\n      .song-name {\n        font-size: 19px;\n        font-weight: bold;\n        display: flex;\n        color: #2f2f2f;\n        .tag {\n          margin: 0 0 0 10px;\n          span {\n            color: #eb6363;\n            border: 1px solid #eb6363;\n            margin: 0 5px 0 0;\n            font-family: Arial, Helvetica, sans-serif;\n            font-size: 12px;\n            padding: 0 5px;\n            border-radius: 4px;\n            cursor: pointer;\n            &:nth-child(1) {\n              color: #fa8153;\n              border: 1px solid #fa8153;\n            }\n          }\n        }\n      }\n      & > ul {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        width: 100%;\n        & > .album-name {\n          width: 60%;\n          background-color: #fff;\n          cursor: pointer;\n        }\n        & > .artist-name {\n          width: 30%;\n          background-color: #fff;\n          cursor: pointer;\n        }\n        & > li {\n          white-space: nowrap;\n          span {\n            margin: 0 0 0 8px;\n            color: #507daf;\n          }\n        }\n      }\n      .lyric {\n        width: 400px;\n        height: 300px;\n        border-right: 1px solid #f9d5cb;\n        overflow-y: scroll;\n        text-align: center;\n        span {\n          color: #ec4141;\n          padding: 300px 0 0 0;\n        }\n        &::-webkit-scrollbar {\n          width: 2px;\n          height: 10px;\n          background-color: #dddcdb;\n        }\n        li {\n          padding: 3px 0 3px 10px;\n          text-align: center;\n          font-size: 14px;\n          transition: font-size 0.2s;\n          &.active {\n            color: #ec4141;\n            font-weight: bold;\n            font-size: 18px;\n          }\n        }\n      }\n    }\n  }\n  .play-content {\n    margin: 30px 0 0 0;\n    display: flex;\n    .play-left {\n      width: 820px;\n      border-right: 1px solid #f1f1f1;\n      padding: 0 20px;\n      .comment-title {\n        font-size: 16px;\n        font-weight: bold;\n      }\n    }\n    .play-right {\n      flex: 1;\n      padding: 30px 15px 0 15px;\n    }\n  }\n`;\nexport const CenterContent = styled.div`\n  width: 1190px;\n  margin: 0 auto;\n  border-left: 1px solid #d3d3d3;\n  border-right: 1px solid #d3d3d3;\n  background-color: #fff;\n`;\n","import React, { memo, FC, ReactElement, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\nimport { Map } from 'immutable';\n\nimport { PlayPageWrapper, CenterContent } from './style';\n\nimport { cancelFavorite, setUserFavorite } from '../../../network/user';\nimport { getAllComment, publishComment } from '../../../network/comment';\nimport { downloadSong } from '../../../network/song';\n\nimport Reply from '../../common/reply';\nimport Comment from '../../common/comment';\n\nimport { changeUserDetailAction } from '../../../views/Login/store/actionCreators';\n\nimport { ILogin, IUserDetail } from '../../../constant/store/login';\nimport { IComment } from '../../../constant/comment';\nimport { ISongStore } from '../../../constant/store/song';\n\nconst PlayPage: FC<RouteComponentProps> = memo((props): ReactElement => {\n  const [comment, setComment] = useState<IComment[]>([]);\n  const [total, setTotal] = useState<number>(0);\n  const { songDetail, lyric, currentLyricIndex } = useSelector<Map<string, ISongStore>, ISongStore>((state) => {\n    return state.getIn(['songReducer', 'song']);\n  });\n  const { userDetail } = useSelector<Map<string, ILogin>, { userDetail: IUserDetail }>((state) => ({\n    userDetail: state.getIn(['loginReducer', 'login', 'userDetail'])\n  }));\n  const playType = useSelector<Map<string, number>, number>((state) => {\n    return state.getIn(['playModeTypeReducer', 'playType']);\n  });\n  const dispatch = useDispatch();\n  //获取所有评论\n  useEffect(() => {\n    let id = 'songId';\n    if (playType === 1) {\n      id = 'cId';\n    }\n    getAllComment(songDetail.id, id, 0, 30).then((data: any) => {\n      setComment(data.comments);\n      setTotal(data.count);\n    });\n  }, [songDetail.id, playType]);\n\n  const albumRouter = () => {\n    if (playType === 0) {\n      props.history.push({\n        pathname: '/Home/albumDetail',\n        state: {\n          id: songDetail.album.id\n        }\n      });\n    }\n  };\n  const artistRouter = () => {\n    if (playType === 0) {\n      props.history.push({\n        pathname: '/Home/artistDetail',\n        state: {\n          id: songDetail.artist.id\n        }\n      });\n    } else if (playType === 1) {\n      props.history.push({\n        pathname: '/Home/userDetail',\n        state: {\n          userId: songDetail.user.userId\n        }\n      });\n    }\n  };\n  //用户喜欢歌曲\n  const loveClick = () => {\n    if (!isLove()) {\n      setUserFavorite(songDetail.id).then((data: any) => {\n        dispatch(changeUserDetailAction());\n      });\n    } else {\n      cancelFavorite(songDetail.id).then((data: any) => {\n        dispatch(changeUserDetailAction());\n      });\n    }\n  };\n  //发布\n  const publish = (content: string): void => {\n    if (content.trim().length !== 0 && songDetail.id) {\n      if (playType === 0) {\n        publishComment(content, 'songId', songDetail.id).then((data) => {\n          getAllComment(songDetail.id, 'songId', 0, 30).then((data: any) => {\n            setComment(data.comments);\n            setTotal(data.count);\n          });\n        });\n      } else if (playType === 1) {\n        publishComment(content, 'cId', songDetail.id).then((data) => {\n          getAllComment(songDetail.id, 'cId', 0, 30).then((data: any) => {\n            setComment(data.comments);\n            setTotal(data.count);\n          });\n        });\n      }\n    }\n  };\n  //回复\n  const reply = () => {\n    if (playType === 0) {\n      getAllComment(songDetail.id, 'songId', 0, 30).then((data: any) => {\n        setComment(data.comments);\n        setTotal(data.count);\n      });\n    } else if (playType === 1) {\n      getAllComment(songDetail.id, 'cId', 0, 30).then((data: any) => {\n        setComment(data.comments);\n        setTotal(data.count);\n      });\n    }\n  };\n  const isLove = (): boolean => {\n    const index = userDetail.love.findIndex((item: { songId: string }, index: number) => {\n      return item.songId === songDetail.id;\n    });\n    return index !== -1;\n  };\n  const download = () => {\n    downloadSong(songDetail.id, songDetail.name);\n  };\n  return (\n    <PlayPageWrapper>\n      <CenterContent>\n        <div className=\"play\">\n          <div className=\"play-album\">\n            <div className=\"rotate-album\">\n              <img src={songDetail.album ? songDetail.album.coverUrl : ''} alt=\"cover\" />\n            </div>\n            <div className=\"control-btn\">\n              <ul>\n                <li onClick={(e) => loveClick()}>\n                  {!isLove() && <i className=\"iconfont icon-love\"> </i>}\n                  {isLove() && (\n                    <i className=\"iconfont icon-loveit\" style={{ color: '#ec4141' }}>\n                      {' '}\n                    </i>\n                  )}\n                </li>\n                <li onClick={(e) => download()}>\n                  <i className=\"iconfont icon-download\"> </i>\n                </li>\n              </ul>\n            </div>\n          </div>\n          <div className=\"song-msg\">\n            <div className=\"song-name\">{songDetail.name}</div>\n            <ul>\n              <li className=\"album-name text-nowrap\">\n                专辑:\n                <span onClick={(e) => albumRouter()}>{songDetail.album ? songDetail.album.name : ''}</span>\n              </li>\n              <li className=\"artist-name text-nowrap\">\n                歌手:\n                <span onClick={(e) => artistRouter()}>\n                  {songDetail.artist ? songDetail.artist.name : songDetail.user.userName}\n                </span>\n              </li>\n            </ul>\n            <div className=\"lyric\">\n              <ul>\n                {lyric &&\n                  lyric !== '暂无歌词' &&\n                  Array.isArray(lyric) &&\n                  lyric.map((item: any, index: number) => {\n                    return (\n                      <li key={item.duration} className={index === currentLyricIndex ? 'active' : ''}>\n                        {item.content}\n                      </li>\n                    );\n                  })}\n              </ul>\n              {lyric === '暂无歌词' ? <span className=\"no-tip\">{lyric}</span> : ''}\n            </div>\n          </div>\n        </div>\n        {/*评论信息*/}\n        <div className=\"play-content\">\n          <div className=\"play-left\">\n            <p className=\"comment-title\">歌曲评论</p>\n            <Reply isShowPublish={true} isShowBtn={false} onClick={(content: string) => publish(content)} />\n            <br />\n            <Comment comments={comment} onClick={() => reply()} isPage={true} total={total} />\n          </div>\n        </div>\n      </CenterContent>\n    </PlayPageWrapper>\n  );\n});\nexport default withRouter(PlayPage);\n","import axios, { AxiosInstance, AxiosRequestConfig } from 'axios';\nimport { HOST_NAME } from '../config';\nimport store from '../store';\nimport { changeUserMsg, logoutAction } from '../views/Login/store/actionCreators';\nimport { createBrowserHistory } from 'history';\n\nfunction request<T>(config: AxiosRequestConfig) {\n  const instance: AxiosInstance = axios.create({\n    baseURL: HOST_NAME,\n    timeout: 15000\n  });\n  instance.interceptors.request.use(\n    (config) => {\n      return config;\n    },\n    (err) => {\n      console.log(err);\n      return err;\n    }\n  );\n  instance.interceptors.response.use(\n    (res) => {\n      return res.data;\n    },\n    (err) => {\n      if (err.response) {\n        const { status, data } = err.response;\n        if (status * 1 === 403 && data.message === '请登录') {\n          // @ts-ignore\n          store.dispatch(logoutAction());\n          store.dispatch(\n            changeUserMsg({\n              token: '',\n              userName: '',\n              userId: '',\n              avatarUrl: '',\n              createTime: '',\n              updateTime: '',\n              manage: -1,\n              auth: -1\n            })\n          );\n          createBrowserHistory().push({\n            pathname: '/Login'\n          });\n        } else {\n          throw err;\n        }\n      }\n    }\n  );\n  return instance.request<any, T>(config);\n}\n\nexport default request;\n","import { message } from 'antd';\nimport { login } from '../../../network/login';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { getUserDetail } from '../../../network/user';\nimport { ILoginUserAction } from './type';\nimport { IUserDetail, IUserMsg } from '../../../constant/store/login';\n\nexport function changeUserMsg(res: IUserMsg): ILoginUserAction {\n  return {\n    type: 'changeUserMsg',\n    userMsg: res\n  };\n}\n\nfunction changeLoginType(res: number): ILoginUserAction {\n  return {\n    type: 'changeLoginType',\n    loginType: res\n  };\n}\n\nfunction changeUserDetail(res: IUserDetail): ILoginUserAction {\n  return {\n    type: 'changeUserDetail',\n    userDetail: res\n  };\n}\n\nfunction deleteUserDetail(): ILoginUserAction {\n  return {\n    type: 'changeUserDetail',\n    userDetail: {\n      userId: '',\n      userName: '',\n      avatarUrl: '',\n      subscriber: [],\n      thumb: [],\n      follow: [{ userId: '' }],\n      love: [{ songId: '' }]\n    }\n  };\n}\n\nexport function changeUserDetailAction() {\n  return (dispatch: any) => {\n    getUserDetail().then((data: any) => {\n      const { love, follow } = data;\n      if (!love) {\n        data.love = [];\n      }\n      if (!follow) {\n        data.follow = [];\n      }\n      window.localStorage.setItem('userDetail', JSON.stringify(data));\n      dispatch(changeUserDetail(data));\n    });\n  };\n}\n\nexport function loginAction(userName: string, password: string, props: RouteComponentProps) {\n  return async (dispatch: any) => {\n    try {\n      const data: any = await login(userName, password);\n      if (data) {\n        await dispatch(changeUserMsg(data));\n        await dispatch(changeLoginType(1));\n        window.localStorage.setItem('userMsg', JSON.stringify(data));\n        window.localStorage.setItem('loginType', '1');\n        await dispatch(changeUserDetailAction());\n        props.history.push({\n          pathname: '/Home'\n        });\n      }\n    } catch (e) {\n      console.log(e);\n      message.warning({\n        content: '用户名或者密码错误',\n        style: {\n          fontSize: '20px',\n          marginTop: '5vh'\n        }\n      });\n    }\n  };\n}\n\n//退出登录\nexport function logoutAction() {\n  return (dispatch: any) => {\n    window.localStorage.clear();\n    dispatch(changeLoginType(0));\n    dispatch(\n      changeUserMsg({\n        token: '',\n        userName: '',\n        userId: '',\n        avatarUrl: '',\n        createTime: '',\n        updateTime: '',\n        manage: -1,\n        auth: -1\n      })\n    );\n    dispatch(deleteUserDetail());\n  };\n}\n","import request from '../request';\nimport store from '../../store/index';\n\n//用户喜欢歌曲\nexport function setUserFavorite(id: string) {\n  return request({\n    url: '/user/favorite',\n    method: 'post',\n    data: {\n      id\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n\n//获取用户喜欢歌曲\nexport function getUserFavorite(offset: number, limit: number) {\n  return request({\n    url: '/user/favorite',\n    params: {\n      offset,\n      limit\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n\n//取消用户喜欢\nexport function cancelFavorite(songId: string) {\n  return request({\n    url: '/user/favorite/cancel',\n    method: 'post',\n    data: {\n      songId: songId\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n\n//获取用户收藏\nexport function getUserSub(url: string, offset: number, limit: number) {\n  return request({\n    url: `/sub/user/${url}`,\n    params: {\n      offset,\n      limit\n    },\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n\n//获取当前登录用户详情\nexport function getUserDetail() {\n  return request({\n    url: '/user/detail',\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token\n    }\n  });\n}\n\n//上传用户头像\nexport function uploadAvatar(formData: FormData) {\n  return request({\n    url: '/user/upload/avatar',\n    method: 'post',\n    headers: {\n      // @ts-ignore\n      authorization: store.getState().getIn(['loginReducer', 'login', 'userMsg']).token,\n      'Content-Type': 'multipart/form-data'\n    },\n    data: formData\n  });\n}\n"],"sourceRoot":""}