(this["webpackJsonpawen-music-react"]=this["webpackJsonpawen-music-react"]||[]).push([[22],{101:function(t,e,n){"use strict";function r(t,e){var n=new Date(t);/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));var r={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds()};for(var i in r)if(new RegExp("(".concat(i,")")).test(e)){var c=r[i]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?c:a(c))}return e||""}function a(t){return("00"+t).substr(t.length)}n.d(e,"a",(function(){return r})),console.log(r(251179,"mm:ss"))},102:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}));var r=n(91);function a(t,e){return Object(r.a)({url:"/login",method:"post",data:{userName:t,password:e}})}function i(t,e){return Object(r.a)({url:"/register",method:"post",data:{userName:t,password:e}})}},159:function(t,e,n){"use strict";var r,a=n(0),i=n(15),c=n(16).a.div(r||(r=Object(i.a)(["\n  position: relative;\n  width: ",";\n  .img-container {\n    width: ",";\n    height: ",";\n    overflow: hidden;\n    border-radius: 3px;\n    background-color: #fff;\n    position: relative;\n    img {\n      width: 100%;\n      position: absolute;\n      left: 50%;\n      top: 50%;\n      transform: translate(-50%, -50%);\n    }\n  }\n  .play-count {\n    position: absolute;\n    left: 100%;\n    top: 0;\n    color: #fff;\n    transform: translate(-110%, 10%);\n    white-space: nowrap;\n  }\n  .dt {\n    position: absolute;\n    top: 100%;\n    left: 100%;\n    color: #fff;\n    transform: translate(-110%, -110%);\n  }\n  .state {\n    margin: 10px 0 5px 0;\n    color: #373737;\n  }\n  .user-name {\n    color: #507daf;\n    font-size: 12px;\n    cursor: pointer;\n  }\n"])),(function(t){return t.widthProps}),(function(t){return t.widthProps}),(function(t){return parseInt(t.widthProps)*t.scale+"px"})),s=n(101),o=n(3),u=function(t){var e=t.img,n=t.state,r=t.playCount,a=t.isShowPlayCount,i=t.itemWidth,u=t.scale,l=t.dt,d=t.userName,f=t.cover,p=t.onClick,b=function(){p&&p()};return Object(o.jsxs)(c,{widthProps:i,scale:u,children:[Object(o.jsxs)("div",{className:"img-container",children:[f,e,l&&Object(o.jsx)("div",{className:"dt",children:Object(s.a)(l,"mm:ss")})]}),Object(o.jsx)("div",{className:"state text-nowrap",children:n}),Object(o.jsxs)("div",{className:"play-count",children:[a&&Object(o.jsx)("i",{className:"iconfont icon-play",children:" "}),r]}),d&&Object(o.jsx)("div",{className:"user-name",onClick:function(t){return b()},children:d})]})};e.a=Object(a.memo)(u)},166:function(t,e,n){"use strict";function r(t,e){for(var n=[],r=0;r<Math.ceil(t/e)*e-t;r++)n.push(r);return n}n.d(e,"a",(function(){return r}))},169:function(t,e,n){"use strict";var r=n(37);function a(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var i,c=n(0),s=n(15),o=n(16).a.div(i||(i=Object(s.a)(["\n  .list {\n    display: flex;\n    align-items: center;\n    margin: 0 0 20px 0;\n    li {\n      margin: 0 20px 0 0;\n      cursor: pointer;\n      &.active {\n        span {\n          border-bottom: 3px solid #ec4141;\n          padding: 0 0 4px 0;\n          font-weight: bold;\n        }\n      }\n    }\n  }\n"]))),u=n(3),l=function(t){var e=t.list,n=t.contentName,i=a(t,["list","contentName"]),s=Object(c.useState)(0),l=Object(r.a)(s,2),d=l[0],f=l[1];return Object(u.jsxs)(o,{children:[Object(u.jsx)("ul",{className:"list",children:0!==e.length&&e.map((function(t,e){return Object(u.jsx)("li",{onClick:function(t){return function(t){f(t)}(e)},className:d===e?"active":"",children:Object(u.jsx)("span",{children:t})},t)}))}),Object(u.jsx)("ul",{children:0!==e.length&&e.map((function(t,e){return d===e&&Object(u.jsx)("li",{children:i[n[e]]},t)}))})]})};e.a=Object(c.memo)(l)},473:function(t,e,n){"use strict";n.r(e);var r,a,i=n(0),c=n(169),s=n(37),o=n(200),u=n(18),l=n(15),d=n(16),f=d.a.div(r||(r=Object(l.a)(["\n  .sub-albums {\n    & > li {\n      display: flex;\n      align-items: center;\n      padding: 10px 0;\n      &:nth-child(odd) {\n        background-color: #f9f9f9;\n      }\n      &:hover {\n        background-color: #f0f1f2;\n      }\n      .index {\n        padding: 0 10px;\n        color: #cfcfcf;\n        font-size: 13px;\n      }\n      .img-container {\n        width: 60px;\n        height: 60px;\n        border-radius: 5px;\n        overflow: hidden;\n        margin: 0 20px 0 0;\n        cursor: pointer;\n        img {\n          width: 100%;\n        }\n      }\n      .name {\n        width: 20%;\n        cursor: pointer;\n      }\n      .publish-time {\n        color: #9b9b9b;\n        font-size: 13px;\n      }\n    }\n  }\n  .empty-tip {\n    padding: 150px 0;\n  }\n  .page {\n    display: flex;\n    justify-content: center;\n    padding: 10px 0 0 0;\n  }\n"]))),p=n(101),b=n(2),m=n(98),h=n(3),g=function(t){var e=Object(i.useState)([]),n=Object(s.a)(e,2),r=n[0],a=n[1],c=Object(i.useState)(0),l=Object(s.a)(c,2),d=l[0],b=l[1];Object(i.useEffect)((function(){Object(m.d)("album",0,10).then((function(t){a(t.album),b(t.count)}))}),[]);var g=function(e){t.history.push({pathname:"/Home/albumDetail",state:{id:e.id}})};return Object(h.jsxs)(f,{children:[Object(h.jsx)("ul",{className:"sub-albums",children:r&&0!==r.length&&r.map((function(t,e){return Object(h.jsxs)("li",{children:[Object(h.jsx)("div",{className:"index",children:(e+1).toString().padStart(2,"0")}),Object(h.jsx)("div",{className:"img-container",onClick:function(e){return g(t)},children:Object(h.jsx)("img",{src:t.coverUrl,alt:""})}),Object(h.jsx)("div",{className:"name",onClick:function(e){return g(t)},children:t.name}),Object(h.jsx)("div",{className:"publish-time",children:Object(p.a)(parseInt(t.publishTime),"yyyy-MM-dd")})]},t.id)}))}),d>10&&Object(h.jsx)("div",{className:"page",children:Object(h.jsx)(o.a,{defaultCurrent:1,total:d,pageSize:10,onChange:function(t){return function(t){Object(m.d)("album",10*(t-1),10).then((function(t){a(t.album),b(t.count)}))}(t)}})}),r&&0===r.length&&Object(h.jsx)("div",{className:"empty-tip",children:Object(h.jsx)(u.a,{image:u.a.PRESENTED_IMAGE_SIMPLE,description:"\u60a8\u8fd8\u672a\u6536\u85cf\u4e13\u8f91"})})]})},j=Object(b.g)(Object(i.memo)(g)),O=d.a.div(a||(a=Object(l.a)(["\n  .sub-artist {\n    display: flex;\n    justify-content: space-between;\n    flex-wrap: wrap;\n    & > li {\n      padding: 10px 0;\n      width: 150px;\n      .artist-name {\n        font-size: 14px;\n      }\n    }\n  }\n  .empty-tip {\n    padding: 150px 0;\n  }\n"]))),x=n(159),v=n(166),w=function(t){var e=Object(i.useState)([]),n=Object(s.a)(e,2),r=n[0],a=n[1];Object(i.useEffect)((function(){Object(m.d)("artist",0,30).then((function(t){a(t)}))}),[]);return Object(h.jsxs)(O,{children:[Object(h.jsxs)("ul",{className:"sub-artist",children:[r&&0!==r.length&&r.map((function(e,n){return Object(h.jsx)("li",{children:Object(h.jsx)(x.a,{img:Object(h.jsx)("img",{src:e.avatarUrl,alt:e.name,onClick:function(n){return function(e){t.history.push({pathname:"/Home/artistDetail",state:{id:e.id}})}(e)}}),state:Object(h.jsx)("span",{className:"artist-name",children:e.name}),itemWidth:"150px",isShowPlayCount:!1,scale:1})},e.id)})),r&&Object(v.a)(r.length,7).map((function(t){return Object(h.jsx)("li",{children:" "},t)}))]}),r&&0===r.length&&Object(h.jsx)("div",{className:"empty-tip",children:Object(h.jsx)(u.a,{image:u.a.PRESENTED_IMAGE_SIMPLE,description:"\u60a8\u8fd8\u672a\u6536\u85cf\u6b4c\u624b"})})]})},y=Object(b.g)(Object(i.memo)(w)),N=function(){return Object(h.jsx)("div",{style:{padding:"20px"},children:Object(h.jsx)(c.a,{list:["\u4e13\u8f91","\u6b4c\u624b"],contentName:["albums","artists"],albums:Object(h.jsx)(j,{}),artists:Object(h.jsx)(y,{})})})};e.default=Object(i.memo)(N)},91:function(t,e,n){"use strict";var r=n(118),a=n.n(r),i=n(28),c=n(23),s=n(97),o=n(8);e.a=function(t){var e=a.a.create({baseURL:i.a,timeout:15e3});return e.interceptors.request.use((function(t){return t}),(function(t){return console.log(t),t})),e.interceptors.response.use((function(t){return t.data}),(function(t){if(t.response){var e=t.response,n=e.status,r=e.data;if(1*n!==403||"\u8bf7\u767b\u5f55"!==r.message)throw t;c.a.dispatch(Object(s.d)()),c.a.dispatch(Object(s.b)({token:"",userName:"",userId:"",avatarUrl:"",createTime:"",updateTime:"",manage:-1,auth:-1})),Object(o.a)().push({pathname:"/Login"})}})),e.request(t)}},97:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return d})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return p}));var r=n(116),a=n.n(r),i=n(117),c=n(462),s=n(102),o=n(98);function u(t){return{type:"changeUserMsg",userMsg:t}}function l(t){return{type:"changeLoginType",loginType:t}}function d(){return function(t){Object(o.b)().then((function(e){var n=e.love,r=e.follow;n||(e.love=[]),r||(e.follow=[]),window.localStorage.setItem("userDetail",JSON.stringify(e)),t({type:"changeUserDetail",userDetail:e})}))}}function f(t,e,n){return function(){var r=Object(i.a)(a.a.mark((function r(i){var o;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(s.a)(t,e);case 3:if(!(o=r.sent)){r.next=14;break}return r.next=7,i(u(o));case 7:return r.next=9,i(l(1));case 9:return window.localStorage.setItem("userMsg",JSON.stringify(o)),window.localStorage.setItem("loginType","1"),r.next=13,i(d());case 13:n.history.push({pathname:"/Home"});case 14:r.next=20;break;case 16:r.prev=16,r.t0=r.catch(0),console.log(r.t0),c.b.warning({content:"\u7528\u6237\u540d\u6216\u8005\u5bc6\u7801\u9519\u8bef",style:{fontSize:"20px",marginTop:"5vh"}});case 20:case"end":return r.stop()}}),r,null,[[0,16]])})));return function(t){return r.apply(this,arguments)}}()}function p(){return function(t){window.localStorage.clear(),t(l(0)),t(u({token:"",userName:"",userId:"",avatarUrl:"",createTime:"",updateTime:"",manage:-1,auth:-1})),t({type:"changeUserDetail",userDetail:{userId:"",userName:"",avatarUrl:"",subscriber:[],thumb:[],follow:[{userId:""}],love:[{songId:""}]}})}}},98:function(t,e,n){"use strict";n.d(e,"e",(function(){return i})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return s})),n.d(e,"d",(function(){return o})),n.d(e,"b",(function(){return u})),n.d(e,"f",(function(){return l}));var r=n(91),a=n(23);function i(t){return Object(r.a)({url:"/user/favorite",method:"post",data:{id:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function c(t,e){return Object(r.a)({url:"/user/favorite",params:{offset:t,limit:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function s(t){return Object(r.a)({url:"/user/favorite/cancel",method:"post",data:{songId:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function o(t,e,n){return Object(r.a)({url:"/sub/user/".concat(t),params:{offset:e,limit:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function u(){return Object(r.a)({url:"/user/detail",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function l(t){return Object(r.a)({url:"/user/upload/avatar",method:"post",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token,"Content-Type":"multipart/form-data"},data:t})}}}]);
//# sourceMappingURL=22.d73c5ef3.chunk.js.map