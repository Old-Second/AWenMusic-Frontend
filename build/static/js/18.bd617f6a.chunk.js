(this["webpackJsonpawen-music-react"]=this["webpackJsonpawen-music-react"]||[]).push([[18],{101:function(n,t,e){"use strict";function r(n,t){var e=new Date(n);/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var r={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var i in r)if(new RegExp("(".concat(i,")")).test(t)){var o=r[i]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?o:a(o))}return t||""}function a(n){return("00"+n).substr(n.length)}e.d(t,"a",(function(){return r})),console.log(r(251179,"mm:ss"))},102:function(n,t,e){"use strict";e.d(t,"a",(function(){return a})),e.d(t,"b",(function(){return i}));var r=e(91);function a(n,t){return Object(r.a)({url:"/login",method:"post",data:{userName:n,password:t}})}function i(n,t){return Object(r.a)({url:"/register",method:"post",data:{userName:n,password:t}})}},107:function(n,t,e){"use strict";e.d(t,"d",(function(){return c})),e.d(t,"f",(function(){return s})),e.d(t,"e",(function(){return l})),e.d(t,"c",(function(){return d})),e.d(t,"a",(function(){return f})),e.d(t,"b",(function(){return g}));var r=e(91),a=e(23),i=e(132),o=e.n(i),u=e(28);function c(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return Object(r.a)({url:"/song/recommend",params:{offset:n,limit:t}})}function s(n){return Object(r.a)({url:"/song/url",params:{id:n}})}function l(n){return Object(r.a)({url:"/song/detail",params:{id:n}})}function d(n){return Object(r.a)({url:"/song/lyric",params:{id:n}})}function f(n){return Object(r.a)({url:"/song/playCount",method:"post",data:{id:n}})}function g(n,t){fetch("".concat(u.a,"/song/download"),{method:"post",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token,"Content-Type":"application/json"},body:JSON.stringify({id:n})}).then((function(n){var e=o.a.createWriteStream(t+".mp3",{size:n.headers.get("content-length")}),r=n.body;if(window.WritableStream&&r.pipeTo)return r.pipeTo(e).then((function(){}));window.writer=e.getWriter();var a=n.body.getReader();!function n(){return a.read().then((function(t){return t.done?window.writer.close():window.writer.write(t.value).then(n)}))}()}))}},111:function(n,t,e){"use strict";e.d(t,"c",(function(){return d})),e.d(t,"a",(function(){return f})),e.d(t,"d",(function(){return p})),e.d(t,"e",(function(){return h})),e.d(t,"b",(function(){return m}));var r=e(45),a=e(107),i=function(n,t){return Math.floor(Math.random()*(t-n+1))+n};var o=e(143),u=e(144),c=e.n(u);function s(n){return document.title="".concat(n.name," - ").concat(n.artist?n.artist.name:""," - awen-music"),{type:"changeSongDetail",songDetail:n}}function l(n){return{type:"changeLyric",lyric:n}}function d(n){return{type:"changeLyricLine",lyricLine:n}}function f(n){return{type:"changeCurrentLyricIndex",currentLyricIndex:n}}function g(n){return{type:"changeCurrentIndex",currentIndex:n}}function p(n){return{type:"changePlayMode",playMode:n}}function h(n){return function(t,e){var i=e().getIn(["songReducer","song"]).playlist,o=i.findIndex((function(t,e){return t.id===n}));t({type:"changePlayType",playType:0}),-1===o&&(Object(a.e)(n).then((function(e){t(s(e)),t(b(n)),t(y(n));var a=Object(r.a)(i);a.push(e),t({type:"changePlaylist",playlist:a}),t(g(a.length-1))})),Object(a.a)(n)),-1!==o&&(t(g(o)),t(s(i[o])),t(b(n)),t(y(n)),Object(a.a)(n))}}function m(n){return function(t,e){var r=e().getIn(["songReducer","song"]).playMode,a=e().getIn(["songReducer","song"]).playlist,o=e().getIn(["songReducer","song"]).currentIndex;switch(r){case 1:if(1!==a.length){for(var u=i(0,a.length-1);u===o;)u=i(0,a.length-1);o=u}else 1!==a.length&&0!==a.length||(o=0);break;default:(o+=n)<0&&(o=a.length-1),o>a.length-1&&(o=0)}t(g(o)),t(s(a[o])),t(b(a[o].id))}}function b(n){return function(t){Object(a.f)(n).then((function(n){var e=function(n){var t=c.a.verify(n,"-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDVngqLlcT4xs9q18KCEWGaNYIa\nEMwSIus02VG3XVt8IGwT5Ws8Z1qCULz7jxERDKgSyfUM0EMOQ2KH/Z/ZhhZAld1r\nDCjxhiWLwXx5qYWJo9U862aYMQUjb3J5iqf2Wg+OuHPYkZ9oUvQl01kMRTkEkprf\nkNSJkagkgGMGph5OywIDAQAB\n-----END PUBLIC KEY-----",{algorithms:["RS256"]});return t&&t.url||t&&t.mp3Url?(console.log(t.url||t.mp3Url),t.url||t.mp3Url):""}(n.mp3Url);t({type:"changeSongURL",songUrl:e})}))}}function y(n){return function(t){Object(a.c)(n).then((function(n){n.lyric?t(l(function(n){var t,e=[],r=/\[(\d{2}):(\d{2})\.(\d{2,3})\]/,a=n.split("\n"),i=Object(o.a)(a);try{for(i.s();!(t=i.n()).done;){var u=t.value;if(u){var c=r.exec(u);if(!c)continue;var s={duration:60*c[1]*1e3+1e3*c[2]+(3===c[3].length?1*c[3]:10*c[3]),content:u.replace(r,"").trim()};e.push(s)}}}catch(l){i.e(l)}finally{i.f()}return e}(n.lyric))):t(l("\u6682\u65e0\u6b4c\u8bcd"))}))}}},145:function(n,t){},146:function(n,t){},147:function(n,t){},148:function(n,t){},150:function(n,t){},151:function(n,t){},152:function(n,t){},153:function(n,t){},154:function(n,t){},155:function(n,t){},479:function(n,t,e){"use strict";e.r(t);var r,a=e(0),i=e(19),o=e(15),u=e(16).a.ul(r||(r=Object(o.a)(["\n  & > li {\n    display: flex;\n    align-items: center;\n    padding: 10px 20px;\n    &:nth-child(odd) {\n      background-color: #f9f9f9;\n    }\n    &:hover {\n      background-color: #f0f1f2;\n    }\n    .index {\n      color: #cfd2d9;\n      font-size: 13px;\n      padding: 0 15px 0 0;\n    }\n    .name {\n      width: 30%;\n      color: #0086b3;\n      display: flex;\n      align-items: center;\n      cursor: pointer;\n      & > span {\n        font-size: 13px;\n        max-width: 155px;\n        display: inline-block;\n        margin: 0 5px 0 0;\n      }\n    }\n    .album-name,\n    .artist-name {\n      color: #656565;\n      font-size: 13px;\n      width: 20%;\n      cursor: pointer;\n    }\n    .dt {\n      color: #9b9b9b;\n      font-size: 12px;\n    }\n  }\n"]))),c=e(101),s=e(111),l=e(18),d=e(3),f=function(n){var t=Object(i.c)((function(n){return n.getIn(["searchReducer","searchResult"])})).song,e=Object(i.b)();return Object(d.jsxs)(u,{children:[t&&0!==t.length&&t.map((function(t,r){return Object(d.jsxs)("li",{children:[Object(d.jsx)("div",{className:"index",children:(r+1).toString().padStart(2,"0")}),Object(d.jsx)("div",{className:"name text-nowrap",onClick:function(n){return function(n,t){e(Object(s.e)(n.id))}(t)},children:Object(d.jsx)("span",{className:"text-nowrap",children:t.name})}),Object(d.jsx)("div",{className:"artist-name",onClick:function(e){return function(t,e){n.history.push({pathname:"/Home/artistDetail",state:{id:t.artist.id}})}(t)},children:t.artist.name}),Object(d.jsx)("div",{className:"album-name",onClick:function(e){return function(t,e){n.history.push({pathname:"/Home/albumDetail",state:{id:t.album.id}})}(t)},children:t.album.name}),Object(d.jsx)("div",{className:"dt",children:Object(c.a)(t.duration,"mm:ss")})]},t.id)})),t&&0===t.length&&Object(d.jsx)("div",{style:{height:"350px",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(d.jsx)(l.a,{image:l.a.PRESENTED_IMAGE_SIMPLE,description:"\u6682\u65e0\u6b4c\u66f2"})})]})};t.default=Object(a.memo)(f)},91:function(n,t,e){"use strict";var r=e(118),a=e.n(r),i=e(28),o=e(23),u=e(97),c=e(8);t.a=function(n){var t=a.a.create({baseURL:i.a,timeout:15e3});return t.interceptors.request.use((function(n){return n}),(function(n){return console.log(n),n})),t.interceptors.response.use((function(n){return n.data}),(function(n){if(n.response){var t=n.response,e=t.status,r=t.data;if(1*e!==403||"\u8bf7\u767b\u5f55"!==r.message)throw n;o.a.dispatch(Object(u.d)()),o.a.dispatch(Object(u.b)({token:"",userName:"",userId:"",avatarUrl:"",createTime:"",updateTime:"",manage:-1,auth:-1})),Object(c.a)().push({pathname:"/Login"})}})),t.request(n)}},97:function(n,t,e){"use strict";e.d(t,"b",(function(){return s})),e.d(t,"a",(function(){return d})),e.d(t,"c",(function(){return f})),e.d(t,"d",(function(){return g}));var r=e(116),a=e.n(r),i=e(117),o=e(462),u=e(102),c=e(98);function s(n){return{type:"changeUserMsg",userMsg:n}}function l(n){return{type:"changeLoginType",loginType:n}}function d(){return function(n){Object(c.b)().then((function(t){var e=t.love,r=t.follow;e||(t.love=[]),r||(t.follow=[]),window.localStorage.setItem("userDetail",JSON.stringify(t)),n({type:"changeUserDetail",userDetail:t})}))}}function f(n,t,e){return function(){var r=Object(i.a)(a.a.mark((function r(i){var c;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(u.a)(n,t);case 3:if(!(c=r.sent)){r.next=14;break}return r.next=7,i(s(c));case 7:return r.next=9,i(l(1));case 9:return window.localStorage.setItem("userMsg",JSON.stringify(c)),window.localStorage.setItem("loginType","1"),r.next=13,i(d());case 13:e.history.push({pathname:"/Home"});case 14:r.next=20;break;case 16:r.prev=16,r.t0=r.catch(0),console.log(r.t0),o.b.warning({content:"\u7528\u6237\u540d\u6216\u8005\u5bc6\u7801\u9519\u8bef",style:{fontSize:"20px",marginTop:"5vh"}});case 20:case"end":return r.stop()}}),r,null,[[0,16]])})));return function(n){return r.apply(this,arguments)}}()}function g(){return function(n){window.localStorage.clear(),n(l(0)),n(s({token:"",userName:"",userId:"",avatarUrl:"",createTime:"",updateTime:"",manage:-1,auth:-1})),n({type:"changeUserDetail",userDetail:{userId:"",userName:"",avatarUrl:"",subscriber:[],thumb:[],follow:[{userId:""}],love:[{songId:""}]}})}}},98:function(n,t,e){"use strict";e.d(t,"e",(function(){return i})),e.d(t,"c",(function(){return o})),e.d(t,"a",(function(){return u})),e.d(t,"d",(function(){return c})),e.d(t,"b",(function(){return s})),e.d(t,"f",(function(){return l}));var r=e(91),a=e(23);function i(n){return Object(r.a)({url:"/user/favorite",method:"post",data:{id:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function o(n,t){return Object(r.a)({url:"/user/favorite",params:{offset:n,limit:t},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function u(n){return Object(r.a)({url:"/user/favorite/cancel",method:"post",data:{songId:n},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function c(n,t,e){return Object(r.a)({url:"/sub/user/".concat(n),params:{offset:t,limit:e},headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function s(){return Object(r.a)({url:"/user/detail",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token}})}function l(n){return Object(r.a)({url:"/user/upload/avatar",method:"post",headers:{authorization:a.a.getState().getIn(["loginReducer","login","userMsg"]).token,"Content-Type":"multipart/form-data"},data:n})}}}]);
//# sourceMappingURL=18.bd617f6a.chunk.js.map